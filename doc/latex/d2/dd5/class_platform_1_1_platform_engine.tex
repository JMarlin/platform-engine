\hypertarget{class_platform_1_1_platform_engine}{
\section{Platform::PlatformEngine Class Reference}
\label{d2/dd5/class_platform_1_1_platform_engine}\index{Platform::PlatformEngine@{Platform::PlatformEngine}}
}
The game engine instance.  


{\tt \#include $<$platform-engine.h$>$}

\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
\hyperlink{class_platform_1_1_platform_engine_dbbbe20e4646a36123681e4c69f621f2}{PlatformEngine} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_8745a9f24dcbb112506321f2ae8bb79b}{Init} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_71ec02a1e29f8fe078bc458627ff0f4c}{Cleanup} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_7ec18621f367de9dd678a2d48a139a40}{StartState} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_23a7914b737c272ce1a46fc1ae1decbb}{ChangeState} (\hyperlink{class_platform_1_1_game_state}{GameState} $\ast$state)
\item 
void \hyperlink{class_platform_1_1_platform_engine_e9bbdbfed8a9d99bc89f21cee4b15bfd}{PushState} (\hyperlink{class_platform_1_1_game_state}{GameState} $\ast$state, char $\ast$scriptPath=NULL)
\item 
void \hyperlink{class_platform_1_1_platform_engine_3b2f23576d40b0a97f8f6477d5156bdf}{PopState} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_ced86dc9266db718d80eec4a61f26c7d}{HandleEvents} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_7f4d1cf999344461cd15dda4106a9e20}{Update} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_af99d3e57733259edd6ffd727c9141e7}{Draw} ()
\item 
bool \hyperlink{class_platform_1_1_platform_engine_a89b32e154a653388cc42f5b9a582f59}{Running} ()
\item 
void \hyperlink{class_platform_1_1_platform_engine_e65f082e457e8d7dab762f7ab6b6d82b}{Quit} ()
\end{CompactItemize}


\subsection{Detailed Description}
The game engine instance. 

This class represents the game engine. It encompasses the major subprocesses; Initialization, State control, Event Handling, Updating, and Drawing. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_platform_1_1_platform_engine_dbbbe20e4646a36123681e4c69f621f2}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!PlatformEngine@{PlatformEngine}}
\index{PlatformEngine@{PlatformEngine}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{PlatformEngine}]{\setlength{\rightskip}{0pt plus 5cm}Platform::PlatformEngine::PlatformEngine ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_dbbbe20e4646a36123681e4c69f621f2}




\subsection{Member Function Documentation}
\hypertarget{class_platform_1_1_platform_engine_23a7914b737c272ce1a46fc1ae1decbb}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!ChangeState@{ChangeState}}
\index{ChangeState@{ChangeState}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{ChangeState}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::ChangeState ({\bf GameState} $\ast$ {\em state})}}
\label{d2/dd5/class_platform_1_1_platform_engine_23a7914b737c272ce1a46fc1ae1decbb}


The engine state is explicitly changed by calling this function with a new state that you wish to be the executed state. It actually passess both the new state and a reference to the engine to the current top state's equivalent function, allowing for customized transitions. \hypertarget{class_platform_1_1_platform_engine_71ec02a1e29f8fe078bc458627ff0f4c}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Cleanup@{Cleanup}}
\index{Cleanup@{Cleanup}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Cleanup}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::Cleanup ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_71ec02a1e29f8fe078bc458627ff0f4c}


This function cleans up any of the remaining global assets of the engine. This mostly consists of open surfaces and states remaining on the stack. \hypertarget{class_platform_1_1_platform_engine_af99d3e57733259edd6ffd727c9141e7}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Draw@{Draw}}
\index{Draw@{Draw}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Draw}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::Draw ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_af99d3e57733259edd6ffd727c9141e7}


This function's main purpose is to call the drawing function of the current state. \hypertarget{class_platform_1_1_platform_engine_ced86dc9266db718d80eec4a61f26c7d}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!HandleEvents@{HandleEvents}}
\index{HandleEvents@{HandleEvents}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{HandleEvents}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::HandleEvents ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_ced86dc9266db718d80eec4a61f26c7d}


This function's main purpose is to call the event handling function of the current state. \hypertarget{class_platform_1_1_platform_engine_8745a9f24dcbb112506321f2ae8bb79b}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Init@{Init}}
\index{Init@{Init}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Init}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::Init ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_8745a9f24dcbb112506321f2ae8bb79b}


The Init function sets up the game assets; aside from just initializing the SDL subsystems, it also loads any configuration scripts. 

The script file, \char`\"{}init.lua\char`\"{}, is loaded as a state by this function.

The variables related to identifying the program revision are then loaded from the config file. \char`\"{}title\char`\"{} refers to the actual name of the program; by default this says something like \char`\"{}Platform Test\char`\"{}, but in a game release this should contain the name of the game itself. \char`\"{}version\char`\"{} is the major revision, and normally should only be incremented in a major rewrite, or when going from pre-release to release. \char`\"{}release\char`\"{} refers to an upgrade release, involving new features or enhancements. \char`\"{}subrelease\char`\"{} refers to small changes, and should probably only be used for bugfixes. \char`\"{}status\char`\"{} is an appended title, and it can either be used for codenames, or to indicate development status; for example, \char`\"{}Beta\char`\"{}, \char`\"{}Release Candidate\char`\"{} or \char`\"{}Final\char`\"{}.

The SDL subsystems are then initialized. The \hyperlink{namespace_platform}{Platform} engine uses the video and timer subsystems.

The window of the main screen should contain all of the previously entered release identification information.

Next, the global variables for display configuration are parsed. \char`\"{}screenWidth\char`\"{} and \char`\"{}screenHeight\char`\"{} represent the horizontal and vertical dimensions of the display screen. \char`\"{}screenBits\char`\"{} represents the bit depth of the screen.

The next set of variables represent SDL flags that specify the way the screen display will operate. These include, for example, \char`\"{}useHardwareMemory\char`\"{} and \char`\"{}useDoubleBuffering.\char`\"{} Most of these are self-explanatory. If you do not understand the meaning of these flags, it is probably safest to leave them at the default settings.

After being parsed, the flags are then used in the generation of the display screen.

Once the screen has been created, an engine flag indicating that the engine is ready to run is set to \char`\"{}true\char`\"{}, the lua script state is closed, and the program can now begin its primary loop of operation.\hypertarget{class_platform_1_1_platform_engine_3b2f23576d40b0a97f8f6477d5156bdf}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!PopState@{PopState}}
\index{PopState@{PopState}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{PopState}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::PopState ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_3b2f23576d40b0a97f8f6477d5156bdf}


This function pops a state pointer off the top of the stack. It's operation is ordered such that the state first becomes inactive and then is deleted from memory, effectively preventing segmentation errors. \hypertarget{class_platform_1_1_platform_engine_e9bbdbfed8a9d99bc89f21cee4b15bfd}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!PushState@{PushState}}
\index{PushState@{PushState}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{PushState}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::PushState ({\bf GameState} $\ast$ {\em state}, \/  char $\ast$ {\em scriptPath} = {\tt NULL})}}
\label{d2/dd5/class_platform_1_1_platform_engine_e9bbdbfed8a9d99bc89f21cee4b15bfd}


This function takes a reference to a state and then pushes it onto the top of the engine's state stack. That then becomes the active stack for the engine.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em state}]Pointer to the newly-created state being pushed \item[{\em scriptPath}]The path to the state's configuration script \end{description}
\end{Desc}
\hypertarget{class_platform_1_1_platform_engine_e65f082e457e8d7dab762f7ab6b6d82b}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Quit@{Quit}}
\index{Quit@{Quit}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Quit}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::Quit ()\hspace{0.3cm}{\tt  \mbox{[}inline\mbox{]}}}}
\label{d2/dd5/class_platform_1_1_platform_engine_e65f082e457e8d7dab762f7ab6b6d82b}


\hypertarget{class_platform_1_1_platform_engine_a89b32e154a653388cc42f5b9a582f59}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Running@{Running}}
\index{Running@{Running}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Running}]{\setlength{\rightskip}{0pt plus 5cm}bool Platform::PlatformEngine::Running ()\hspace{0.3cm}{\tt  \mbox{[}inline\mbox{]}}}}
\label{d2/dd5/class_platform_1_1_platform_engine_a89b32e154a653388cc42f5b9a582f59}


\hypertarget{class_platform_1_1_platform_engine_7ec18621f367de9dd678a2d48a139a40}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!StartState@{StartState}}
\index{StartState@{StartState}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{StartState}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::StartState ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_7ec18621f367de9dd678a2d48a139a40}


This function uses a prewritten lua script to initiate a state. This is intended to be the first state that is run by the engine. 

First, the state is loaded from the hard-coded preset path of the 'beginstate.lua' script. This path is \char`\"{}./scripts/beginstate.lua\char`\"{}.

The engine then retrieves the type of state from the script and creates that state.

After creation, the state is pushed onto the engine's state stack, and then it is initiated.\hypertarget{class_platform_1_1_platform_engine_7f4d1cf999344461cd15dda4106a9e20}{
\index{Platform::PlatformEngine@{Platform::PlatformEngine}!Update@{Update}}
\index{Update@{Update}!Platform::PlatformEngine@{Platform::PlatformEngine}}
\subsubsection[{Update}]{\setlength{\rightskip}{0pt plus 5cm}void Platform::PlatformEngine::Update ()}}
\label{d2/dd5/class_platform_1_1_platform_engine_7f4d1cf999344461cd15dda4106a9e20}


This function's main purpose is to call the update function of the current state. 